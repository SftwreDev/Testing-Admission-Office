{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<style>
table.dataTable thead .sorting:after,
table.dataTable thead .sorting:before,
table.dataTable thead .sorting_asc:after,
table.dataTable thead .sorting_asc:before,
table.dataTable thead .sorting_asc_disabled:after,
table.dataTable thead .sorting_asc_disabled:before,
table.dataTable thead .sorting_desc:after,
table.dataTable thead .sorting_desc:before,
table.dataTable thead .sorting_desc_disabled:after,
table.dataTable thead .sorting_desc_disabled:before {
bottom: .5em;
}

</style>
<div class="container-fluid">
  {% for message in messages %}
  <div class="alert alert-primary alert-dismissible fade show" role="alert">
    {{message}}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% endfor %}
  <div class="card shadow">
    <div class="card-header">Student Profile</div>
    <div class="card">
      <div class="card-header" style="background-color: white; font-size: 12px;">
        <ul class="nav nav-pills card-header-pills">
          <li class="nav-item">
            <a class="nav-link active" href="{% url 'students:students_detail_view' student.id %}">Present School</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'students:students_previous_school_detail_view' student.id %}">Previous School</a>
            
          </li>
          
        </ul>
      </div>
      <div class="card-body">
        
          <h5>{{student.l_name}}, {{student.f_name}} {{student.m_name}}
            {% if previous_school == None %}
          <a href="" data-toggle="modal" data-target="#addModal" style="font-size: 14px;">
            <i class="fas fa-user-edit"></i>
          </a>
            {% else %}
            <a href="{% url 'students:students_previous_school_update_view' student.pk %}" class="text-primary" style="font-size: 14px;">
              <i class="fas fa-edit"></i>
            </a>
            <a class="text-danger" data-toggle="modal" data-target="#deleteModal" style="font-size: 14px;">
              <i class="fas fa-trash-alt"></i>
            </a>
            {% endif %}
        </h5>
          <ul class="list-group list-group-horizontal">
            <li class="list-group-item"><div class="font-weight-bold">College : </div> {{student.college}}</li>
            <li class="list-group-item"><div class="font-weight-bold">Course : </div> {{student.course}}</li>
            <li class="list-group-item"><div class="font-weight-bold">Major : </div> {{student.major}}</li>
            <li class="list-group-item"><div class="font-weight-bold">Year Level : </div> {{student.yearlevel}}</li>
            
          </ul>
        
      </div>
    </div>
  </div>
  <br>
  <div class="card shadow mb-5">
    <div class="card-header">
      Student File Documents &nbsp;
      <a href="" data-toggle="modal" data-target="#fileModal" style="font-size: 14px;">
        <i class="fas fa-plus"></i>
      </a>
    </div>
    <div class="card-body">
      <table class="table text-center table-borderless"  style="font-size: 12px;">
        <thead>
            <tr>
            <th scope="col">#</th>
            <th scope="col">File Name</th>
            <th scope="col">Actions</th>
            
            </tr>
        </thead>
        {% for list in files %}
        <tbody>
            <tr>
            <th scope="row">{{forloop.counter}}</th>
            <td>{{list.name}}</td>
            <td>
                <a href="{{ list.document }}"  class="btn btn-warning text-white btn-sm" download><i class="fas fa-file-download"></i></a>
                <a href="{% url 'documents:office_file_update' list.pk %}" class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></a>
                <a href="" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteModal"><i class="fas fa-trash-alt"></i></a>
            </td>
            
            </tr>
            
        </tbody>
        
        <!-- Modal -->
        <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add previous school</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            
                <div class="modal-body">
                    Are you sure you want to delete this file?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <a href="{% url 'documents:office_file_delete' list.pk %}" class="btn btn-primary btn-sm">Delete</a>
                </div>
                
                </div>
            </div>
        </div>
        {% endfor %}
        </table>
        
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Update Information</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST">
      <div class="modal-body">
          {% csrf_token %}
          {{update_form|crispy}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">Submit</button>
      </div>
      </form>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="fileModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Upload Student Documents</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST"   enctype="multipart/form-data">
      <div class="modal-body">
          {% csrf_token %}
          {{form|crispy}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">Submit</button>
      </div>
      </form>
    </div>
  </div>
</div>


<!-- Modal -->
{% if previous_school != None %}
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirmation</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      
      <div class="modal-body">
          Are you sure you want to delete this ?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <a href="{% url 'students:delete_previous_school' previous_school.pk %}" class="btn btn-primary">Submit</a>
      </div>
      
    </div>
  </div>
</div>
{% endif %}
<script>
  $(document).ready(function () {
$('#dtVerticalScrollExample').DataTable({
"scrollY": "200px",
"scrollCollapse": true,
});
$('.dataTables_length').addClass('bs-select');
});
</script>
{% endblock content  %}



